<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="A fully functional HP 12C financial calculator simulator for iOS and web">
    <meta name="theme-color" content="#004262">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HP 12C">
    <title>HP 12C Financial Calculator</title>
    <link rel="icon" type="image/svg+xml" href="Assets/college-logo.svg">
    <link rel="apple-touch-icon" href="Assets/college-logo.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=74">
    <script src="calculator.js?v=79"></script>
</head>
<body>
    <div class="container">
        <div class="calculator-section">
            <div class="calculator-container">
                <!-- Calculator Display -->
                <div class="display-container">
                    <div class="display">
                        <div class="display-screen" id="display-screen">0.00</div>
                        <div class="display-indicators">
                            <span class="indicator user" id="user-indicator">USER</span>
                            <span class="indicator f" id="f-indicator">f</span>
                            <span class="indicator g" id="g-indicator">g</span>
                            <span class="indicator begin" id="begin-indicator">BEGIN</span>
                            <span class="indicator grad" id="grad-indicator">GRAD</span>
                            <span class="indicator rad" id="rad-indicator">RAD</span>
                            <span class="indicator dmy" id="dmy-indicator">D.MY</span>
                            <span class="indicator c" id="c-indicator">C</span>
                            <span class="indicator prgm" id="prgm-indicator">PRGM</span>
                        </div>
                    </div>
                </div>

                <!-- Calculator Image with Button Overlays -->
                <div class="calculator-image-container">
                    <img src="Assets/AmyCalc_HP_12c_Background.png" alt="AmyCalc12c Calculator" class="calculator-image">
                    
                    <!-- Row 1 buttons -->
                    <button class="calc-btn" data-key="n" data-primary="n" data-f="AMORT" data-g="12×" style="top: 39%; left: 9.2%;">n</button>
                    <button class="calc-btn" data-key="i" data-primary="i" data-f="INT" data-g="12÷" style="top: 39%; left: 18.2%;">i</button>
                    <button class="calc-btn" data-key="pv" data-primary="PV" data-f="NPV" data-g="CFo" style="top: 39%; left: 27.2%;">PV</button>
                    <button class="calc-btn" data-key="pmt" data-primary="PMT" data-f="RND" data-g="CFj" style="top: 39%; left: 36.2%;">PMT</button>
                    <button class="calc-btn" data-key="fv" data-primary="FV" data-f="IRR" data-g="Nj" style="top: 39%; left: 45.2%;">FV</button>
                    <button class="calc-btn" data-key="chs" data-primary="CHS" data-f="" data-g="DATE" style="top: 39%; left: 54.2%;">CHS</button>
                    <button class="calc-btn" data-key="7" data-primary="7" data-f="" data-g="BEG" style="top: 39%; left: 63.2%;">7</button>
                    <button class="calc-btn" data-key="8" data-primary="8" data-f="" data-g="END" style="top: 39%; left: 72.2%;">8</button>
                    <button class="calc-btn" data-key="9" data-primary="9" data-f="" data-g="MEM" style="top: 39%; left: 81.2%;">9</button>
                    <button class="calc-btn" data-key="divide" data-primary="÷" data-f="" data-g="" style="top: 39%; left: 90.2%;">÷</button>

                    <!-- Row 2 buttons -->
                    <button class="calc-btn" data-key="yx" data-primary="y^x" data-f="PRICE" data-g="√x" style="top: 55%; left: 9.2%;">y^x</button>
                    <button class="calc-btn" data-key="1x" data-primary="1/x" data-f="YTM" data-g="e^x" style="top: 55%; left: 18.2%;">1/x</button>
                    <button class="calc-btn" data-key="percent" data-primary="%T" data-f="SL" data-g="LN" style="top: 55%; left: 27.2%;">%T</button>
                    <button class="calc-btn" data-key="delta" data-primary="Δ%" data-f="SOYD" data-g="FRAC" style="top: 55%; left: 36.2%;">Δ%</button>
                    <button class="calc-btn" data-key="percentdb" data-primary="%" data-f="DB" data-g="INTG" style="top: 55%; left: 45.2%;">%</button>
                    <button class="calc-btn" data-key="eex" data-primary="EEX" data-f="" data-g="ΔDYS" style="top: 55%; left: 54.2%;">EEX</button>
                    <button class="calc-btn" data-key="4" data-primary="4" data-f="" data-g="D.MY" style="top: 55%; left: 63.2%;">4</button>
                    <button class="calc-btn" data-key="5" data-primary="5" data-f="" data-g="M.DY" style="top: 55%; left: 72.2%;">5</button>
                    <button class="calc-btn" data-key="6" data-primary="6" data-f="" data-g="x̄,w" style="top: 55%; left: 81.2%;">6</button>
                    <button class="calc-btn" data-key="multiply" data-primary="×" data-f="" data-g="" style="top: 55%; left: 90.2%;">×</button>

                    <!-- Row 3 buttons -->
                    <button class="calc-btn" data-key="rs" data-primary="R/S" data-f="P/R" data-g="PSE" style="top: 71%; left: 9.2%;">R/S</button>
                    <button class="calc-btn" data-key="sst" data-primary="SST" data-f="Σ" data-g="BST" style="top: 71%; left: 18.2%;">SST</button>
                    <button class="calc-btn" data-key="roll" data-primary="R↓" data-f="PRGM" data-g="GTO" style="top: 71%; left: 27.2%;">R↓</button>
                    <button class="calc-btn" data-key="xy" data-primary="x↔y" data-f="FIN" data-g="x≤y" style="top: 71%; left: 36.2%;">x↔y</button>
                    <button class="calc-btn" data-key="clx" data-primary="CLx" data-f="REG" data-g="x=0" style="top: 71%; left: 45.2%;">CLx</button>
                    <button class="calc-btn" data-key="enter" data-primary="ENTER" data-f="PREFIX" data-g="LSTx" style="top: 79%; left: 54.2%; height: 25%;">ENTER</button>
                    <button class="calc-btn" data-key="1" data-primary="1" data-f="" data-g="x̄,r" style="top: 71%; left: 63.2%;">1</button>
                    <button class="calc-btn" data-key="2" data-primary="2" data-f="" data-g="ŷ,r" style="top: 71%; left: 72.2%;">2</button>
                    <button class="calc-btn" data-key="3" data-primary="3" data-f="" data-g="n!" style="top: 71%; left: 81.2%;">3</button>
                    <button class="calc-btn" data-key="minus" data-primary="−" data-f="" data-g="BST" style="top: 71%; left: 90.2%;">−</button>

                    <!-- Row 4 buttons -->
                    <button class="calc-btn" data-key="on" data-primary="ON" data-f="" data-g="" style="top: 87%; left: 9.2%;">ON</button>
                    <button class="calc-btn f-key" data-key="f" data-primary="f" style="top: 87%; left: 18.2%;">f</button>
                    <button class="calc-btn g-key" data-key="g" data-primary="g" style="top: 87%; left: 27.2%;">g</button>
                    <button class="calc-btn" data-key="sto" data-primary="STO" data-f="" data-g="" style="top: 87%; left: 36.2%;">STO</button>
                    <button class="calc-btn" data-key="rcl" data-primary="RCL" data-f="" data-g="" style="top: 87%; left: 45.2%;">RCL</button>
                    <!-- Space where no button exists on real HP12c -->
                    <button class="calc-btn" data-key="0" data-primary="0" data-f="" data-g="x̂" style="top: 87%; left: 63.2%;">0</button>
                    <button class="calc-btn" data-key="decimal" data-primary="." data-f="" data-g="s" style="top: 87%; left: 72.2%;">.</button>
                    <button class="calc-btn" data-key="sum" data-primary="Σ+" data-f="" data-g="Σ-" style="top: 87%; left: 81.2%;">Σ+</button>
                    <button class="calc-btn" data-key="plus" data-primary="+" data-f="" data-g="" style="top: 87%; left: 90.2%;">+</button>
                </div>
            </div>

            <!-- Financial Registers -->
            <div id="registers-container" class="registers-container">
                <div class="register-group register-financial" id="financial-register-group" style="display: none;">
                    <div class="register-display-horizontal">
                        <div class="register-item"><span class="register-label">n:</span><span id="reg-n">0.00</span></div>
                        <div class="register-item"><span class="register-label">i:</span><span id="reg-i">0.00</span></div>
                        <div class="register-item"><span class="register-label">PV:</span><span id="reg-pv">0.00</span></div>
                        <div class="register-item"><span class="register-label">PMT:</span><span id="reg-pmt">0.00</span></div>
                        <div class="register-item"><span class="register-label">FV:</span><span id="reg-fv">0.00</span></div>
                    </div>
                </div>
            </div>

            <!-- Help/Documentation Section -->
            <div class="help-section collapsed">
                <button class="faq-btn" id="faq-btn" onclick="toggleFAQ()">FAQ</button>
                
                <div id="help-content" style="display: none;">
                    <!-- Category menu -->
                    <div id="help-categories-view" class="help-category-view">
                        <div class="help-header-row">
                            <button class="help-back-arrow" onclick="collapseFAQ()">←</button>
                            <h3>Select a Category</h3>
                        </div>
                        <div class="help-categories">
                            <button class="help-category-btn" onclick="showCategory('tvm')">💰 Time Value of Money - Basics</button>
                            <button class="help-category-btn" onclick="showCategory('math')">🔢 Mathematical Operations</button>
                            <button class="help-category-btn" onclick="showCategory('percentage')">💯 Percentage Calculations</button>
                            <button class="help-category-btn" onclick="showCategory('statistics')">📊 Statistical Calculations</button>
                            <button class="help-category-btn" onclick="showCategory('dates')">📅 Date Calculations</button>
                            <button class="help-category-btn" onclick="showCategory('loans')">🏦 Loans & Financing</button>
                            <button class="help-category-btn" onclick="showCategory('investment')">📈 Investment Analysis</button>
                            <button class="help-category-btn" onclick="showCategory('bonds')">📑 Bond Valuation</button>
                            <button class="help-category-btn" onclick="showCategory('depreciation')">📉 Depreciation</button>
                            <button class="help-category-btn" onclick="showCategory('tips')">💡 Practice Tips & Common Errors</button>
                        </div>
                    </div>

                    <!-- Practice Tips content -->
                    <div id="help-tips" class="help-tips-view" style="display: none;">
                        <div class="help-header-row">
                            <button class="help-back-arrow" onclick="backToCategoryMenu()">←</button>
                            <h3>Practice Tips & Common Errors</h3>
                        </div>
                        <div class="tips-content">
                            <h4>Practice Tips</h4>
                            <ul>
                                <li><strong>Always Clear:</strong> Press <code>f REG</code> or <code>ON</code> to clear before starting new problems</li>
                                <li><strong>Check Signs:</strong> Cash outflows are negative (use <code>CHS</code>)</li>
                                <li><strong>Verify Units:</strong> Ensure interest rates and time periods match (annual vs. monthly)</li>
                                <li><strong>Use ENTER:</strong> For multi-step calculations, use <code>ENTER</code> to separate values</li>
                                <li><strong>Practice RPN:</strong> Get comfortable with Reverse Polish Notation logic</li>
                                <li><strong>Verify Results:</strong> Use known examples to check your technique</li>
                            </ul>

                            <h4>Common Errors to Avoid</h4>
                            <ul>
                                <li><strong>Wrong Sign Convention:</strong> Forgetting to make initial investments negative</li>
                                <li><strong>Mismatched Periods:</strong> Using annual interest rate with monthly payments</li>
                                <li><strong>Forgetting ENTER:</strong> Not using ENTER between stack operations</li>
                                <li><strong>Calculator Mode:</strong> Not clearing previous calculations</li>
                                <li><strong>Date Format:</strong> Using wrong date format (M.DY vs D.MY)</li>
                                <li><strong>Statistics:</strong> Not clearing registers with <code>f REG</code> before new calculations</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Example list for each category -->
                    <div id="help-example-list" class="help-example-list-view" style="display: none;">
                        <div class="help-header-row">
                            <button class="help-back-arrow" onclick="showExamplesMenu()">←</button>
                            <h3 id="category-title"></h3>
                        </div>
                        <div id="example-buttons"></div>
                    </div>

                    <!-- Individual example view -->
                    <div id="help-example-detail" class="help-example-detail-view" style="display: none;">
                        <div class="help-header-row">
                            <button class="help-back-arrow" onclick="backToExampleList()">←</button>
                            <h3 id="example-title"></h3>
                        </div>
                        <div id="example-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="steps-section">
            <div id="registers-container-storage" class="registers-container">
                <div class="register-group" id="storage-register-group" style="display: none;">
                    <h3>Storage</h3>
                    <div class="register-display" id="storage-registers">
                    </div>
                </div>
            </div>
            
            <h2>Calculation Steps</h2>
            <div id="steps-container">
            </div>
        </div>
    </div>

    <link rel="stylesheet" href="styles.css?v=54">
    <script src="calculator.js?v=74"></script>
    <script src="help.js?v=76"></script>
    <script>
        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch((err) => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>